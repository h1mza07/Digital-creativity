<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Liste des itinéraires</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background-color: var(--bg-color); color: var(--text-color); }
        .filter-box { margin-bottom: 20px; }
        select, button { padding: 8px; margin-right: 10px; }
        .itinerary { background: var(--card-bg); padding: 15px; margin-bottom: 10px; border-radius: 6px; }
        .stars { color: gold; }
    </style>
</head>
<body>
    <h1>Itinéraires disponibles</h1>

    <!-- Formulaire de filtre -->
    <div class="filter-box">
        <form method="get">
            <label for="rating">Filtrer par note minimale :</label>
            <select name="rating" id="rating">
                <option value="">Toutes les notes</option>
                <option value="1" {% if selected_rating == '1' %}selected{% endif %}>★ 1+</option>
                <option value="2" {% if selected_rating == '2' %}selected{% endif %}>★★ 2+</option>
                <option value="3" {% if selected_rating == '3' %}selected{% endif %}>★★★ 3+</option>
                <option value="4" {% if selected_rating == '4' %}selected{% endif %}>★★★★ 4+</option>
                <option value="5" {% if selected_rating == '5' %}selected{% endif %}>★★★★★ 5</option>
            </select>
            <button type="submit">Appliquer</button>
            {% if selected_rating %}
                <a href="{% url 'itinerary_list' %}">Voir tous</a>
            {% endif %}
        </form>
    </div>

    <!-- Liste des itinéraires -->
    {% for itinerary in itineraries %}
        <div class="itinerary">
            <h3>{{ itinerary.name }}</h3>
            <p>{{ itinerary.description|truncatewords:20 }}</p>
            <p><strong>Durée :</strong> {{ itinerary.duration_days }} jours</p>
            <p><strong>Difficulté :</strong> {{ itinerary.get_difficulty_display }}</p>
            <p class="stars">★ {{ itinerary.rating }}/5</p>
        </div>
    {% empty %}
        <p>Aucun itinéraire trouvé.</p>
    {% endfor %}
</body>
</html>